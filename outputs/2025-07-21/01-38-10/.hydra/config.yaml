model:
  _target_: src.models.BaseVAE
  input_channels: 1
  latent_dim: 128
  hidden_channels: 128
  ch_mult:
  - 1
  - 2
  - 4
  - 8
  num_res_blocks: 2
  attn_resolutions:
  - 16
  dropout: 0.0
  resolution: 224
  use_linear_attn: false
  attn_type: vanilla
  double_z: true
data:
  _target_: src.data.MedMNISTDataModule
  dataset_names:
  - chestmnist
  batch_size: 2
  num_workers: 4
  size: 224
  as_rgb: false
  root: ${data_dir}
  normalize: true
  augment_train: true
  task_type: multilabel
  num_classes: 14
  input_channels: 1
training:
  max_epochs: 1
  gradient_clip_val: 1.0
  accumulate_grad_batches: 1
  optimizer:
    type: adamw
    lr: 0.0001
    weight_decay: 0.0001
    betas:
    - 0.9
    - 0.999
  scheduler:
    type: cosine
    T_max: 100
    eta_min: 1.0e-06
  loss:
    type: vae
    recon_loss_type: mse
    kl_weight: 1.0
    recon_weight: 1.0
  val_check_interval: 1
  check_val_every_n_epoch: 1
  log_every_n_steps: 50
  save_top_k: 3
experiment_name: medmnist_vae
project_name: medical_vae
tags:
- vae
- medical
- medmnist
work_dir: ${oc.env:PWD}
data_dir: ${work_dir}/data
log_dir: ${work_dir}/logs
checkpoint_dir: ${log_dir}/checkpoints
device: cuda
accelerator: gpu
devices: 1
precision: 16
seed: 42
wandb:
  enabled: false
  project: ${project_name}
  name: ${experiment_name}
  tags: ${tags}
checkpointing:
  save_top_k: 3
  monitor: val/loss
  mode: min
  save_last: true
early_stopping:
  enabled: true
  monitor: val/loss
  patience: 20
  mode: min
